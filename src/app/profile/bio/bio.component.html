<div class="main" *ngIf="profile$ | async as profile">
    <div class="infoCards">
        <div class="detailsHeader">
            <div class="image-container">
                <img [src]="profile.profile_image || '../../assets/batProfile.jpg'" alt="Profile Image" />

            </div>
            <div class="text-details">
                <h3 class="name">{{ profile.first_name }}</h3> <span style="margin-left: 10px; margin-right: 25px;">
                    <h3 class="name">{{ profile.last_name }}</h3>
                </span>
                <h3 class="name">{{ profile.role }}</h3>
            </div>
        </div>

        <!-- BASIC INFO -->
        <div class="infoCard">
            <h4>Basic Information</h4>

            <form [formGroup]="basicForm">
                <label>First Name</label>
                <input formControlName="first_name" />

                <label>Last Name</label>
                <input formControlName="last_name" />

                <label>Middle Name</label>
                <input formControlName="middle_name" />

                <label>Gender</label>
                <p-dropdown id="gender" [options]="genderOptions" formControlName="gender" placeholder="Select Gender"
                    optionLabel="label" optionValue="value"></p-dropdown>

                <label for="dob">Date of Birth</label>
                <p-calendar id="dob" formControlName="dob" [maxDate]="today" dateFormat="yy-mm-dd" [showIcon]="true"
                    [monthNavigator]="true" [yearNavigator]="true" yearRange="1900:2099"
                    placeholder="Select your birthdate"></p-calendar>

                <div *ngIf="basicForm.get('dob')?.invalid && basicForm.get('dob')?.touched" class="text-danger">
                    Please select a valid date of birth.
                </div>

                <div *ngIf="basicForm.dirty" class="action-buttons">
                    <button class="save" (click)="saveBasic(profileId ?? '')" type="button">Save</button>
                    <button class="cancel" (click)="resetForm('basic')" type="button">Cancel</button>
                </div>
            </form>
        </div>

        <!-- ADDRESS INFO -->
        <div class="infoCard">
            <h4>Address</h4>

            <form [formGroup]="addressForm">
                <label>City</label>
                <input formControlName="city" />

                <label>County</label>
                <input formControlName="county" />

                <div *ngIf="addressForm.dirty" class="action-buttons">
                    <button class="save" (click)="saveAddress(profileId ?? '')" type="button">Save</button>
                    <button class="cancel" (click)="resetForm('address')" type="button">Cancel</button>
                </div>
            </form>
        </div>

        <!-- CONTACT INFO -->
        <div class="infoCard">
            <h4>Contact</h4>

            <form [formGroup]="contactForm">
                <label>Phone Number</label>
                <input formControlName="phone_number" maxlength="10" class="form-control" />
                <div *ngIf="contactForm.get('phone_number')?.invalid && contactForm.get('phone_number')?.touched">
                    <small class="text-danger" style="color: red;">contact must be exactly 10 digits.</small>
                </div>

                <label>Emergency Number</label>
                <input type="text" formControlName="emergency_phone" maxlength="10" placeholder="Emergency Contact"
                    class="form-control" />
                <div *ngIf="contactForm.get('emergency_phone')?.invalid && contactForm.get('emergency_phone')?.touched">
                    <small class="text-danger">contact must be exactly 10 digits.</small>
                </div>

                <label>Work Number</label>
                <input type="text" formControlName="work_phone" maxlength="10" placeholder="Work Contact"
                    class="form-control" />
                <div *ngIf="contactForm.get('work_phone')?.invalid && contactForm.get('work_phone')?.touched">
                    <small class="text-danger">contact must be exactly 10 digits.</small>
                </div>

                <div *ngIf="contactForm.dirty" class="action-buttons">
                    <button class="save" (click)="saveContact(profileId ?? '')" type="button">Save</button>
                    <button class="cancel" (click)="resetForm('contact')" type="button">Cancel</button>
                </div>
            </form>
        </div>

    </div>
</div>