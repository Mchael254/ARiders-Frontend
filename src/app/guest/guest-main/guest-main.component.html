<div class="flex flex-col md:flex-row h-screen bg-gray-100">

    <!-- Desktop Navigation -->
    <div class="hidden md:flex md:flex-col bg-black text-white p-4" style="width: 15%;">
        <h4 class="text-xl font-bold mb-6">A Riders Guest</h4>
        <div class="flex-grow">
            <ul class="space-y-2">
                <li>
                    <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                        [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'dashboard'}"
                        (click)="setView('dashboard')">
                        Dashboard
                    </a>
                </li>
                <li>
                    <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                        [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'events'}"
                        (click)="setView('events')">
                        Events
                    </a>
                </li>
                <li>
                    <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                        [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'registrations'}"
                        (click)="setView('registrations')">
                        My Registrations
                    </a>
                </li>
                <li>
                    <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                        [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'profile'}"
                        (click)="setView('profile')">
                        Profile
                    </a>
                </li>
                <li class="mt-4">
                    <a class="block p-2 rounded hover:bg-red-600 cursor-pointer" (click)="showLogoutDialog()">
                        Logout
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col overflow-hidden">

        <!-- Mobile Header -->
        <div class="md:hidden flex justify-between items-center bg-black text-blue-500 p-4">
            <h4 class="text-xl font-bold">A Riders Guest</h4>
            <button (click)="toggleSideNav()" class="text-white focus:outline-none">
                <fa-icon [icon]="faBars"></fa-icon>
            </button>
        </div>

        <!-- View Bar -->
        <div class="flex justify-between items-center bg-white shadow p-4">
            <div class="flex items-center">
                <p class="font-semibold text-gray-700">{{ currentView$ | async }}</p>
            </div>
            <div class="flex items-center">
                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                        </path>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Mobile Side Panel -->
        <div class="fixed inset-0 z-50" *ngIf="sideNavOpen">
            <div class="absolute inset-0 bg-black bg-opacity-50" (click)="toggleSideNav()"></div>
            <div class="absolute left-0 top-0 h-full w-64 bg-black text-white p-4 transform transition-transform duration-300 ease-in-out"
                [ngClass]="{ 'translate-x-0': sideNavOpen, '-translate-x-full': !sideNavOpen }">
                <div class="flex justify-between items-center mb-6">
                    <h4 class="text-xl font-bold">A Riders Guest</h4>
                </div>
                <ul class="space-y-2">
                    <li>
                        <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                            [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'dashboard'}"
                            (click)="setView('dashboard')">
                            Dashboard
                        </a>
                    </li>
                    <li>
                        <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                            [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'events'}"
                            (click)="setView('events')">
                            Events
                        </a>
                    </li>
                    <li>
                        <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                            [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'registrations'}"
                            (click)="setView('registrations')">
                            My Registrations
                        </a>
                    </li>
                    <li>
                        <a class="block p-2 rounded cursor-pointer transition-colors duration-300 hover:bg-gradient-to-r hover:from-blue-700 hover:to-blue-500"
                            [ngClass]="{'bg-blue-700 text-white': (currentView$ | async) === 'profile'}"
                            (click)="setView('profile')">
                            Profile
                        </a>
                    </li>
                    <li class="mt-4">
                        <a class="block p-2 rounded hover:bg-red-600 cursor-pointer" (click)="showLogoutDialog()">
                            Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Panel Content -->
        <div class="flex-1 overflow-auto p-4 bg-gray-50">
            <div *ngIf="(currentView$ | async) === 'dashboard'">
                <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Guest Dashboard</h2>
                    <p class="text-gray-600">Welcome to your guest dashboard. Here you can manage your event
                        registrations and profile.</p>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-blue-900">Upcoming Events</h3>
                            <p class="text-2xl font-bold text-blue-600">3</p>
                        </div>
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-green-900">Registered Events</h3>
                            <p class="text-2xl font-bold text-green-600">5</p>
                        </div>
                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-4">
                            <h3 class="text-lg font-semibold text-amber-900">Completed Events</h3>
                            <p class="text-2xl font-bold text-amber-600">2</p>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="(currentView$ | async) === 'events'">
                <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Available Events</h2>
                    <p class="text-gray-600">Browse and register for upcoming events.</p>
                    <!-- Events component would go here -->
                    <app-events></app-events>
                </div>
            </div>

            <div *ngIf="(currentView$ | async) === 'registrations'">
                <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">My Registrations</h2>
                    <p class="text-gray-600">View and manage your event registrations.</p>
                    <!-- Registration management component would go here -->
                    <div class="mt-4 text-center text-gray-500">
                        <p>Registration management coming soon...</p>
                    </div>
                </div>
            </div>

            <div *ngIf="(currentView$ | async) === 'profile'">
                <div class="bg-white rounded-xl shadow-md border border-gray-200 p-6">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4">Guest Profile</h2>
                    <p class="text-gray-600">Manage your guest profile information.</p>
                    <!-- Profile management component would go here -->
                    <div class="mt-4 text-center text-gray-500">
                        <p>Profile management coming soon...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div *ngIf="logoutDialogVisible"
        class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50"
        (click)="closeLogoutDialog()">
        <div class="relative w-full max-w-md mx-auto bg-white rounded-xl shadow-2xl transform transition-all duration-300 ease-out"
            (click)="$event.stopPropagation()">

            <!-- Modal Header -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                            </path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900">Confirm Logout</h3>
                </div>
                <button (click)="closeLogoutDialog()" class="text-gray-400 hover:text-gray-600 transition-colors p-1">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="p-6">
                <div class="text-center">
                    <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                            </path>
                        </svg>
                    </div>
                    <h4 class="text-lg font-semibold text-gray-900 mb-2">Ready to Leave?</h4>
                    <p class="text-gray-600 text-sm leading-relaxed">
                        Are you sure you want to log out? You'll need to sign in again to access your guest dashboard.
                    </p>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="flex flex-col sm:flex-row gap-3 p-6 border-t border-gray-200">
                <button (click)="closeLogoutDialog()"
                    class="flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                    <span class="flex items-center justify-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12">
                            </path>
                        </svg>
                        Cancel
                    </span>
                </button>

                <button (click)="confirmLogout()"
                    class="flex-1 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-700 to-blue-500 rounded-lg hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 transform hover:scale-105">
                    <span class="flex items-center justify-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                            </path>
                        </svg>
                        Logout
                    </span>
                </button>
            </div>
        </div>
    </div>
</div>